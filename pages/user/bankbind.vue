<template>
  <!-- ç»‘å®šæç°è´¦å·é¡µé¢ -->
  <view class="binding-page">
    
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <view class="binding-header">
      <!-- è¿”å›æŒ‰é’® -->
      <view class="header-back" @click="goBack">
        <text class="back-text">â† è¿”å›</text>
      </view>
      
      <!-- æ ‡é¢˜ -->
      <view class="header-title">
        <text>ç»‘å®šæç°è´¦å·</text>
        <text class="title-en">BIND WITHDRAWAL ACCOUNT</text>
      </view>
      
      <!-- å ä½ç¬¦ -->
      <view class="header-placeholder"></view>
    </view>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <view class="binding-content">
      
      <!-- é€‰æ‹©æç°æ–¹å¼ -->
      <view class="method-selector">
        <view class="selector-title">
          <text class="title-icon">ğŸ”—</text>
          <text>é€‰æ‹©ç»‘å®šæ–¹å¼</text>
        </view>
        
        <view class="method-tabs">
          <view 
            class="tab-item"
            :class="{ active: selectedTab === 'aba' }"
            @click="switchTab('aba')"
          >
            <view class="tab-icon aba-tab">ğŸ¦</view>
            <text class="tab-text">ABAé“¶è¡Œ</text>
          </view>
          
          <view 
            class="tab-item"
            :class="{ active: selectedTab === 'huiwang' }"
            @click="switchTab('huiwang')"
          >
            <view class="tab-icon huiwang-tab">âš¡</view>
            <text class="tab-text">æ±‡æ—º</text>
          </view>
          
          <view 
            class="tab-item"
            :class="{ active: selectedTab === 'usdt' }"
            @click="switchTab('usdt')"
          >
            <view class="tab-icon usdt-tab">â‚¿</view>
            <text class="tab-text">USDT</text>
          </view>
        </view>
      </view>

      <!-- è¡¨å•åŒºåŸŸ -->
      <view class="binding-form">
        
        <!-- ABAé“¶è¡Œè¡¨å• -->
        <view class="form-container" v-if="selectedTab === 'aba'">
          <view class="form-header">
            <view class="method-badge aba-badge">
              <text class="badge-icon">ğŸ¦</text>
              <text class="badge-text">ABAé“¶è¡Œè´¦æˆ·</text>
            </view>
          </view>
          
          <view class="form-fields">
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ‘¤</text>
                <text>è´¦æˆ·å§“å</text>
                <text class="required">*</text>
              </view>
              <view class="input-wrapper">
                <input 
                  class="field-input" 
                  v-model="abaForm.accountName"
                  placeholder="è¯·è¾“å…¥é“¶è¡Œè´¦æˆ·å§“å"
                  @input="validateForm"
                />
              </view>
            </view>
            
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ”¢</text>
                <text>é“¶è¡Œè´¦å·</text>
                <text class="required">*</text>
              </view>
              <view class="input-wrapper">
                <input 
                  class="field-input" 
                  v-model="abaForm.accountNumber"
                  placeholder="è¯·è¾“å…¥ABAé“¶è¡Œè´¦å·"
                  type="number"
                  @input="validateForm"
                />
              </view>
            </view>
            
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ“±</text>
                <text>æ‰‹æœºå·ç </text>
                <text class="required">*</text>
              </view>
              <view class="input-wrapper">
                <input 
                  class="field-input" 
                  v-model="abaForm.phoneNumber"
                  placeholder="è¯·è¾“å…¥ç»‘å®šæ‰‹æœºå·"
                  type="number"
                  @input="validateForm"
                />
              </view>
            </view>
            
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ¢</text>
                <text>å¼€æˆ·è¡Œ</text>
              </view>
              <view class="input-wrapper">
                <input 
                  class="field-input" 
                  v-model="abaForm.bankBranch"
                  placeholder="è¯·è¾“å…¥å¼€æˆ·è¡Œä¿¡æ¯ï¼ˆé€‰å¡«ï¼‰"
                />
              </view>
            </view>
          </view>
        </view>

        <!-- æ±‡æ—ºè¡¨å• -->
        <view class="form-container" v-if="selectedTab === 'huiwang'">
          <view class="form-header">
            <view class="method-badge huiwang-badge">
              <text class="badge-icon">âš¡</text>
              <text class="badge-text">æ±‡æ—ºè´¦æˆ·</text>
            </view>
          </view>
          
          <view class="form-fields">
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ‘¤</text>
                <text>è´¦æˆ·å§“å</text>
                <text class="required">*</text>
              </view>
              <view class="input-wrapper">
                <input 
                  class="field-input" 
                  v-model="huiwangForm.accountName"
                  placeholder="è¯·è¾“å…¥æ±‡æ—ºè´¦æˆ·å§“å"
                  @input="validateForm"
                />
              </view>
            </view>
            
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ“±</text>
                <text>æ±‡æ—ºè´¦å·</text>
                <text class="required">*</text>
              </view>
              <view class="input-wrapper">
                <input 
                  class="field-input" 
                  v-model="huiwangForm.accountNumber"
                  placeholder="è¯·è¾“å…¥æ±‡æ—ºè´¦å·ï¼ˆæ‰‹æœºå·ï¼‰"
                  type="number"
                  @input="validateForm"
                />
              </view>
            </view>
            
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ†”</text>
                <text>èº«ä»½è¯å·</text>
                <text class="required">*</text>
              </view>
              <view class="input-wrapper">
                <input 
                  class="field-input" 
                  v-model="huiwangForm.idNumber"
                  placeholder="è¯·è¾“å…¥èº«ä»½è¯å·ç "
                  @input="validateForm"
                />
              </view>
            </view>
          </view>
        </view>

        <!-- USDTè¡¨å• -->
        <view class="form-container" v-if="selectedTab === 'usdt'">
          <view class="form-header">
            <view class="method-badge usdt-badge">
              <text class="badge-icon">â‚¿</text>
              <text class="badge-text">USDTé’±åŒ…</text>
            </view>
          </view>
          
          <view class="form-fields">
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ”—</text>
                <text>ç½‘ç»œç±»å‹</text>
                <text class="required">*</text>
              </view>
              <view class="network-selector">
                <view 
                  class="network-item"
                  :class="{ active: usdtForm.network === 'TRC20' }"
                  @click="selectNetwork('TRC20')"
                >
                  <text class="network-name">TRC20</text>
                  <text class="network-desc">æ³¢åœºç½‘ç»œ</text>
                </view>
                <view 
                  class="network-item"
                  :class="{ active: usdtForm.network === 'ERC20' }"
                  @click="selectNetwork('ERC20')"
                >
                  <text class="network-name">ERC20</text>
                  <text class="network-desc">ä»¥å¤ªåŠç½‘ç»œ</text>
                </view>
              </view>
            </view>
            
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ“</text>
                <text>é’±åŒ…åœ°å€</text>
                <text class="required">*</text>
              </view>
              <view class="input-wrapper address-wrapper">
                <input 
                  class="field-input" 
                  v-model="usdtForm.walletAddress"
                  placeholder="è¯·è¾“å…¥USDTé’±åŒ…åœ°å€"
                  @input="validateForm"
                />
                <view class="scan-btn" @click="scanQRCode">
                  <text class="scan-icon">ğŸ“·</text>
                </view>
              </view>
            </view>
            
            <view class="field-group">
              <view class="field-label">
                <text class="label-icon">ğŸ‘¤</text>
                <text>å¤‡æ³¨åç§°</text>
              </view>
              <view class="input-wrapper">
                <input 
                  class="field-input" 
                  v-model="usdtForm.remarkName"
                  placeholder="è¯·è¾“å…¥é’±åŒ…å¤‡æ³¨åç§°ï¼ˆé€‰å¡«ï¼‰"
                />
              </view>
            </view>
          </view>
        </view>

        <!-- å®‰å…¨æç¤º -->
        <view class="security-notice">
          <view class="notice-header">
            <text class="notice-icon">ğŸ”’</text>
            <text class="notice-title">å®‰å…¨æç¤º</text>
          </view>
          <view class="notice-content">
            <text class="notice-item">â€¢ è¯·ç¡®ä¿è´¦æˆ·ä¿¡æ¯å‡†ç¡®æ— è¯¯ï¼Œé”™è¯¯ä¿¡æ¯å¯èƒ½å¯¼è‡´æç°å¤±è´¥</text>
            <text class="notice-item">â€¢ ç»‘å®šåçš„è´¦æˆ·ä¿¡æ¯å°†ç”¨äºèº«ä»½éªŒè¯å’Œèµ„é‡‘å®‰å…¨ä¿éšœ</text>
            <text class="notice-item">â€¢ å¦‚éœ€ä¿®æ”¹è´¦æˆ·ä¿¡æ¯ï¼Œè¯·è”ç³»å®¢æœè¿›è¡Œèº«ä»½éªŒè¯</text>
            <text class="notice-item">â€¢ å¹³å°å°†å¯¹æ‚¨çš„è´¦æˆ·ä¿¡æ¯è¿›è¡ŒåŠ å¯†ä¿æŠ¤</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨æäº¤æŒ‰é’® -->
    <view class="binding-footer">
      <view class="agreement-check">
        <view class="checkbox" :class="{ checked: agreeTerms }" @click="toggleAgreement">
          <text class="check-icon">{{ agreeTerms ? 'âœ“' : '' }}</text>
        </view>
        <text class="agreement-text">æˆ‘å·²é˜…è¯»å¹¶åŒæ„</text>
        <text class="agreement-link" @click="showTerms">ã€Šæç°è´¦æˆ·ç»‘å®šåè®®ã€‹</text>
      </view>
      
      <view 
        class="submit-btn" 
        :class="{ disabled: !canSubmit }"
        @click="submitBinding"
      >
        <text class="btn-text">ğŸ” ç¡®è®¤ç»‘å®š</text>
      </view>
    </view>

    <!-- åè®®å¼¹çª— -->
    <view class="terms-modal" v-if="showTermsModal" @click="hideTerms">
      <view class="modal-content" @click.stop>
        <view class="modal-header">
          <text class="modal-title">æç°è´¦æˆ·ç»‘å®šåè®®</text>
          <text class="modal-close" @click="hideTerms">âœ•</text>
        </view>
        
        <scroll-view class="modal-body" scroll-y="true">
          <text class="terms-content">
            ä¸€ã€è´¦æˆ·ç»‘å®šè¯´æ˜
            1. ç”¨æˆ·ç»‘å®šçš„æç°è´¦æˆ·å¿…é¡»ä¸ºæœ¬äººå®åè´¦æˆ·
            2. ç»‘å®šä¿¡æ¯ä¸€ç»ç¡®è®¤ï¼ŒåŸåˆ™ä¸Šä¸å…è®¸éšæ„æ›´æ”¹
            3. å¦‚éœ€ä¿®æ”¹è´¦æˆ·ä¿¡æ¯ï¼Œéœ€è¦é€šè¿‡å®¢æœéªŒè¯èº«ä»½
            
            äºŒã€å®‰å…¨è´£ä»»
            1. ç”¨æˆ·åº”å¦¥å–„ä¿ç®¡è´¦æˆ·ä¿¡æ¯ï¼Œé¿å…æ³„éœ²
            2. å› ç”¨æˆ·ä¿¡æ¯é”™è¯¯å¯¼è‡´çš„æŸå¤±ç”±ç”¨æˆ·æ‰¿æ‹…
            3. å¹³å°å°†é‡‡ç”¨åŠ å¯†æŠ€æœ¯ä¿æŠ¤ç”¨æˆ·ä¿¡æ¯å®‰å…¨
            
            ä¸‰ã€æç°è§„åˆ™
            1. æç°åªèƒ½åˆ°ç»‘å®šçš„è´¦æˆ·
            2. å•ç¬”æç°é‡‘é¢æœ‰é™åˆ¶
            3. æç°éœ€è¦é€šè¿‡é£æ§å®¡æ ¸
            
            å››ã€å…¶ä»–æ¡æ¬¾
            1. æœ¬åè®®æœ€ç»ˆè§£é‡Šæƒå½’å¹³å°æ‰€æœ‰
            2. å¦‚æœ‰äº‰è®®ï¼Œä»¥æœ€æ–°ç‰ˆæœ¬åè®®ä¸ºå‡†
          </text>
        </scroll-view>
        
        <view class="modal-footer">
          <view class="modal-btn" @click="agreeAndClose">
            <text class="btn-text">åŒæ„å¹¶å…³é—­</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</template>

<script>
// å¯¼å…¥APIæ¥å£
import {bindWithdrawalAccount} from '@/api/withdrawalAccount.js'

export default {
  name: 'BindingPage',
  
  data() {
    return {
      // å½“å‰é€‰æ‹©çš„æ ‡ç­¾é¡µ
      selectedTab: 'aba',
      
      // æ˜¯å¦åŒæ„åè®®
      agreeTerms: false,
      
      // æ˜¯å¦æ˜¾ç¤ºåè®®å¼¹çª—
      showTermsModal: false,
      
      // ABAé“¶è¡Œè¡¨å•æ•°æ®
      abaForm: {
        accountName: '',
        accountNumber: '',
        phoneNumber: '',
        bankBranch: ''
      },
      
      // æ±‡æ—ºè¡¨å•æ•°æ®
      huiwangForm: {
        accountName: '',
        accountNumber: '',
        idNumber: ''
      },
      
      // USDTè¡¨å•æ•°æ®
      usdtForm: {
        network: 'TRC20',
        walletAddress: '',
        remarkName: ''
      },
      
      // å·²ç»‘å®šçš„è´¦æˆ·åˆ—è¡¨
      bindedAccounts: []
    }
  },
  
  computed: {
    // æ˜¯å¦å¯ä»¥æäº¤
    canSubmit() {
      if (!this.agreeTerms) return false
      
      switch (this.selectedTab) {
        case 'aba':
          return this.abaForm.accountName && 
                 this.abaForm.accountNumber && 
                 this.abaForm.phoneNumber
        case 'huiwang':
          return this.huiwangForm.accountName && 
                 this.huiwangForm.accountNumber && 
                 this.huiwangForm.idNumber
        case 'usdt':
          return this.usdtForm.network && 
                 this.usdtForm.walletAddress
        default:
          return false
      }
    }
  },
  
  methods: {
    /**
     * è¿”å›ä¸Šä¸€é¡µ
     */
    goBack() {
      uni.navigateBack()
    },
    
    /**
     * åˆ‡æ¢æ ‡ç­¾é¡µ
     */
    switchTab(tab) {
      this.selectedTab = tab
    },
    
    /**
     * é€‰æ‹©USDTç½‘ç»œ
     */
    selectNetwork(network) {
      this.usdtForm.network = network
      this.validateForm()
    },
    
    /**
     * æ‰«æäºŒç»´ç 
     */
    scanQRCode() {
      uni.scanCode({
        success: (res) => {
          this.usdtForm.walletAddress = res.result
          this.validateForm()
        },
        fail: () => {
          uni.showToast({
            title: 'æ‰«æå¤±è´¥',
            icon: 'none'
          })
        }
      })
    },
    
    /**
     * éªŒè¯è¡¨å•
     */
    validateForm() {
		return true
      switch (this.selectedTab) {
        case 'aba':
          // éªŒè¯é“¶è¡Œå¡å·
          if (this.abaForm.accountNumber && !this.validateBankCard(this.abaForm.accountNumber)) {
            uni.showToast({
              title: 'é“¶è¡Œå¡å·æ ¼å¼ä¸æ­£ç¡®',
              icon: 'none'
            })
            return false
          }
          // éªŒè¯æ‰‹æœºå·
          if (this.abaForm.phoneNumber && !/^[0-9]{9,15}$/.test(this.abaForm.phoneNumber)) {
            uni.showToast({
              title: 'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®',
              icon: 'none'
            })
            return false
          }
          break
          
        case 'huiwang':
          // éªŒè¯æ‰‹æœºå·
          if (this.huiwangForm.accountNumber && !/^[0-9]{9,15}$/.test(this.huiwangForm.accountNumber)) {
            uni.showToast({
              title: 'æ±‡æ—ºè´¦å·æ ¼å¼ä¸æ­£ç¡®',
              icon: 'none'
            })
            return false
          }
          // éªŒè¯èº«ä»½è¯å·ï¼ˆç®€å•éªŒè¯ï¼‰
          if (this.huiwangForm.idNumber && !/^[A-Za-z0-9]{6,20}$/.test(this.huiwangForm.idNumber)) {
            uni.showToast({
              title: 'èº«ä»½è¯å·æ ¼å¼ä¸æ­£ç¡®',
              icon: 'none'
            })
            return false
          }
          break
          
        case 'usdt':
          // éªŒè¯USDTåœ°å€
          if (this.usdtForm.walletAddress && !this.validateUSDTAddress(this.usdtForm.walletAddress, this.usdtForm.network)) {
            uni.showToast({
              title: 'USDTåœ°å€æ ¼å¼ä¸æ­£ç¡®',
              icon: 'none'
            })
            return false
          }
          break
      }
      return true
    },
    
    /**
     * åˆ‡æ¢åè®®åŒæ„çŠ¶æ€
     */
    toggleAgreement() {
      this.agreeTerms = !this.agreeTerms
    },
    
    /**
     * æ˜¾ç¤ºåè®®
     */
    showTerms() {
      this.showTermsModal = true
    },
    
    /**
     * éšè—åè®®
     */
    hideTerms() {
      this.showTermsModal = false
    },
    
    /**
     * åŒæ„åè®®å¹¶å…³é—­
     */
    agreeAndClose() {
      this.agreeTerms = true
      this.hideTerms()
    },
    
    /**
     * æäº¤ç»‘å®š
     */
    submitBinding() {
      if (!this.canSubmit) {
        uni.showToast({
          title: 'è¯·æ£€æŸ¥è¡¨å•ä¿¡æ¯',
          icon: 'none'
        })
        return
      }
      
      // å…ˆéªŒè¯è¡¨å•
      if (!this.validateForm()) {
        return
      }
      
      let accountInfo = ''
      let formData = {}
      
      switch (this.selectedTab) {
        case 'aba':
          accountInfo = `ABAé“¶è¡Œè´¦æˆ·ï¼š${this.abaForm.accountName}`
          formData = { ...this.abaForm, type: 'aba' }
          break
        case 'huiwang':
          accountInfo = `æ±‡æ—ºè´¦æˆ·ï¼š${this.huiwangForm.accountName}`
          formData = { ...this.huiwangForm, type: 'huiwang' }
          break
        case 'usdt':
          accountInfo = `USDTé’±åŒ…ï¼š${this.usdtForm.network}`
          formData = { ...this.usdtForm, type: 'usdt' }
          break
      }
      
      // æ˜¾ç¤ºç¡®è®¤å¼¹çª—
      uni.showModal({
        title: 'ç¡®è®¤ç»‘å®š',
        content: `${accountInfo}\n\nç¡®è®¤ç»‘å®šæ­¤è´¦æˆ·ï¼Ÿç»‘å®šåå°†ç”¨äºæç°æ“ä½œã€‚`,
        confirmText: 'ç¡®è®¤ç»‘å®š',
        cancelText: 'å–æ¶ˆ',
        success: (res) => {
          if (res.confirm) {
            this.processBinding(formData)
          }
        }
      })
    },
    
    /**
     * å¤„ç†ç»‘å®šè¯·æ±‚
     */
    async processBinding(formData) {
      try {
        uni.showLoading({
          title: 'ç»‘å®šä¸­...'
        })
        
        // æ„å»ºå‘é€åˆ°åç«¯çš„æ•°æ®
        const requestData = this.buildRequestData(formData)
        
        // è°ƒç”¨ç»‘å®šæ¥å£
        const response = await bindWithdrawalAccount(requestData)
        
        uni.hideLoading()
        
        if (response.data.code === 200) {
          uni.showToast({
            title: 'ç»‘å®šæˆåŠŸ',
            icon: 'success'
          })
          
          // ç»‘å®šæˆåŠŸåè¿”å›
          setTimeout(() => {
            uni.navigateBack()
          }, 1500)
        } else {
          uni.showToast({
            title: response.data.message || 'ç»‘å®šå¤±è´¥',
            icon: 'none'
          })
        }
      } catch (error) {
        uni.hideLoading()
        console.error('ç»‘å®šå¤±è´¥:', error)
        uni.showToast({
          title: 'ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•',
          icon: 'none'
        })
      }
    },
    
    /**
     * æ„å»ºè¯·æ±‚æ•°æ®
     */
    buildRequestData(formData) {
      const baseData = {
        account_type: formData.type // è´¦æˆ·ç±»å‹: aba, huiwang, usdt
      }
      
      switch (formData.type) {
        case 'aba':
          return {
            ...baseData,
            account_name: formData.accountName,
            account_number: formData.accountNumber,
            phone_number: formData.phoneNumber,
            bank_branch: formData.bankBranch || ''
          }
          
        case 'huiwang':
          return {
            ...baseData,
            account_name: formData.accountName,
            account_number: formData.accountNumber,
            id_number: formData.idNumber
          }
          
        case 'usdt':
          return {
            ...baseData,
            wallet_address: formData.walletAddress,
            network_type: formData.network, // TRC20 æˆ– ERC20
            remark_name: formData.remarkName || ''
          }
          
        default:
          throw new Error('æœªçŸ¥çš„è´¦æˆ·ç±»å‹')
      }
    },
    
    /**
     * è·å–å·²ç»‘å®šçš„è´¦æˆ·åˆ—è¡¨
     */
    async getBindedAccounts() {
      try {
        const response = await this.$api.getWithdrawalAccounts({
          page: 1,
          limit: 10
        })
        
        if (response.code === 200) {
          this.bindedAccounts = response.data.list || []
        }
      } catch (error) {
        console.error('è·å–ç»‘å®šè´¦æˆ·å¤±è´¥:', error)
      }
    },
    
    /**
     * éªŒè¯é“¶è¡Œå¡å·
     */
    validateBankCard(cardNumber) {
      // ç®€å•çš„é“¶è¡Œå¡å·éªŒè¯
      const cleanNumber = cardNumber.replace(/\s+/g, '')
      return cleanNumber.length >= 10 && cleanNumber.length <= 25 && /^\d+$/.test(cleanNumber)
    },
    
    /**
     * éªŒè¯USDTåœ°å€
     */
    validateUSDTAddress(address, network) {
      if (network === 'TRC20') {
        // TRC20åœ°å€éªŒè¯ï¼ˆæ³¢åœºåœ°å€ä»¥Tå¼€å¤´ï¼Œé•¿åº¦34ä½ï¼‰
        return /^T[A-Za-z1-9]{33}$/.test(address)
      } else if (network === 'ERC20') {
        // ERC20åœ°å€éªŒè¯ï¼ˆä»¥å¤ªåŠåœ°å€ä»¥0xå¼€å¤´ï¼Œé•¿åº¦42ä½ï¼‰
        return /^0x[a-fA-F0-9]{40}$/.test(address)
      }
      return false
    }
  }
}
</script>

<style lang="scss" scoped>
/* ========== é¡µé¢ä¸»ä½“æ ·å¼ ========== */
.binding-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  position: relative;
}

/* ========== é¡¶éƒ¨å¯¼èˆªæ  ========== */
.binding-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 120rpx;
  padding: 0 40rpx;
  padding-top: var(--status-bar-height);
  position: relative;
  z-index: 10;
}

.header-back {
  .back-text {
    color: #ffffff;
    font-size: 28rpx;
    padding: 16rpx 24rpx;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20rpx;
    border: 1rpx solid rgba(255, 255, 255, 0.2);
    
    &:active {
      background: rgba(255, 255, 255, 0.2);
    }
  }
}

.header-title {
  flex: 1;
  text-align: center;
  
  text {
    display: block;
    color: #ffffff;
    
    &:first-child {
      font-size: 36rpx;
      font-weight: 600;
      margin-bottom: 4rpx;
    }
    
    &.title-en {
      font-size: 20rpx;
      opacity: 0.7;
      letter-spacing: 2rpx;
    }
  }
}

.header-placeholder {
  width: 60rpx;
}

/* ========== ä¸»è¦å†…å®¹åŒºåŸŸ ========== */
.binding-content {
  padding: 0 40rpx 300rpx;
}

/* ========== æ–¹å¼é€‰æ‹©å™¨ ========== */
.method-selector {
  margin-bottom: 40rpx;
}

.selector-title {
  display: flex;
  align-items: center;
  margin-bottom: 30rpx;
  
  .title-icon {
    font-size: 32rpx;
    margin-right: 16rpx;
  }
  
  text:not(.title-icon) {
    color: #ffffff;
    font-size: 32rpx;
    font-weight: 600;
  }
}

.method-tabs {
  display: flex;
  gap: 20rpx;
}

.tab-item {
  flex: 1;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 20rpx;
  padding: 30rpx 20rpx;
  border: 2rpx solid rgba(255, 255, 255, 0.2);
  text-align: center;
  transition: all 0.3s ease;
  
  &.active {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.3) 0%, rgba(255, 215, 0, 0.2) 100%);
    border-color: #ffd700;
    box-shadow: 0 0 20rpx rgba(255, 215, 0, 0.3);
  }
  
  &:active {
    transform: scale(0.95);
  }
}

.tab-icon {
  width: 50rpx;
  height: 50rpx;
  margin: 0 auto 16rpx;
  border-radius: 12rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28rpx;
  
  &.aba-tab {
    background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
  }
  
  &.huiwang-tab {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  }
  
  &.usdt-tab {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  }
}

.tab-text {
  color: #ffffff;
  font-size: 24rpx;
  font-weight: 500;
}

/* ========== è¡¨å•å®¹å™¨ ========== */
.binding-form {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
  backdrop-filter: blur(20rpx);
  border-radius: 24rpx;
  padding: 40rpx;
  border: 2rpx solid rgba(255, 255, 255, 0.1);
}

.form-container {
  margin-bottom: 40rpx;
}

.form-header {
  margin-bottom: 40rpx;
}

.method-badge {
  display: flex;
  align-items: center;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 16rpx;
  padding: 20rpx 30rpx;
  border: 1rpx solid rgba(255, 255, 255, 0.2);
  
  .badge-icon {
    font-size: 28rpx;
    margin-right: 16rpx;
  }
  
  .badge-text {
    color: #ffffff;
    font-size: 28rpx;
    font-weight: 600;
  }
  
  &.aba-badge {
    border-color: #3b82f6;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.1) 100%);
  }
  
  &.huiwang-badge {
    border-color: #ef4444;
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(239, 68, 68, 0.1) 100%);
  }
  
  &.usdt-badge {
    border-color: #10b981;
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%);
  }
}

/* ========== è¡¨å•å­—æ®µ ========== */
.form-fields {
  display: flex;
  flex-direction: column;
  gap: 30rpx;
}

.field-group {
  .field-label {
    display: flex;
    align-items: center;
    margin-bottom: 16rpx;
    
    .label-icon {
      font-size: 24rpx;
      margin-right: 12rpx;
    }
    
    text:not(.label-icon):not(.required) {
      color: #ffffff;
      font-size: 26rpx;
      font-weight: 500;
    }
    
    .required {
      color: #ff6b6b;
      font-size: 24rpx;
      margin-left: 8rpx;
    }
  }
}

.input-wrapper {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 16rpx;
  padding: 0 30rpx;
  height: 88rpx;
  display: flex;
  align-items: center;
  border: 2rpx solid rgba(255, 255, 255, 0.2);
  
  &.address-wrapper {
    padding-right: 20rpx;
  }
  
  .field-input {
    flex: 1;
    color: #ffffff;
    font-size: 28rpx;
    background: transparent;
    
    &::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }
  }
}

.scan-btn {
  width: 60rpx;
  height: 60rpx;
  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
  border-radius: 12rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 20rpx;
  
  .scan-icon {
    font-size: 24rpx;
    color: #333333;
  }
  
  &:active {
    transform: scale(0.9);
  }
}

/* ========== ç½‘ç»œé€‰æ‹©å™¨ ========== */
.network-selector {
  display: flex;
  gap: 20rpx;
}

.network-item {
  flex: 1;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 16rpx;
  padding: 24rpx;
  border: 2rpx solid rgba(255, 255, 255, 0.2);
  text-align: center;
  transition: all 0.3s ease;
  
  &.active {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.3) 0%, rgba(16, 185, 129, 0.2) 100%);
    border-color: #10b981;
  }
  
  .network-name {
    display: block;
    color: #ffffff;
    font-size: 26rpx;
    font-weight: 600;
    margin-bottom: 8rpx;
  }
  
  .network-desc {
    display: block;
    color: rgba(255, 255, 255, 0.6);
    font-size: 20rpx;
  }
}

/* ========== å®‰å…¨æç¤º ========== */
.security-notice {
  background: rgba(59, 130, 246, 0.1);
  border-radius: 16rpx;
  padding: 30rpx;
  border: 1rpx solid rgba(59, 130, 246, 0.3);
}

.notice-header {
  display: flex;
  align-items: center;
  margin-bottom: 20rpx;
  
  .notice-icon {
    font-size: 24rpx;
    margin-right: 12rpx;
  }
  
  .notice-title {
    color: #3b82f6;
    font-size: 26rpx;
    font-weight: 600;
  }
}

.notice-content {
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

.notice-item {
  color: rgba(255, 255, 255, 0.7);
  font-size: 22rpx;
  line-height: 1.5;
}

/* ========== åº•éƒ¨åŒºåŸŸ ========== */
.binding-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 30rpx 40rpx;
  background: linear-gradient(to top, rgba(26, 26, 46, 0.95) 0%, rgba(26, 26, 46, 0.8) 100%);
  backdrop-filter: blur(20rpx);
  border-top: 1rpx solid rgba(255, 255, 255, 0.1);
}

.agreement-check {
  display: flex;
  align-items: center;
  margin-bottom: 30rpx;
  
  .checkbox {
    width: 36rpx;
    height: 36rpx;
    border: 2rpx solid rgba(255, 255, 255, 0.5);
    border-radius: 8rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 16rpx;
    
    &.checked {
      background: #ffd700;
      border-color: #ffd700;
    }
    
    .check-icon {
      color: #333333;
      font-size: 20rpx;
      font-weight: bold;
    }
  }
  
  .agreement-text {
    color: rgba(255, 255, 255, 0.8);
    font-size: 24rpx;
    margin-right: 8rpx;
  }
  
  .agreement-link {
    color: #ffd700;
    font-size: 24rpx;
    text-decoration: underline;
  }
}

.submit-btn {
  height: 88rpx;
  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
  border-radius: 44rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  box-shadow: 0 8rpx 32rpx rgba(255, 215, 0, 0.3);
  
  &:active {
    transform: translateY(2rpx);
    box-shadow: 0 4rpx 16rpx rgba(255, 215, 0, 0.4);
  }
  
  &.disabled {
    background: rgba(255, 255, 255, 0.2);
    box-shadow: none;
    
    .btn-text {
      opacity: 0.5;
    }
  }
  
  .btn-text {
    color: #333333;
    font-size: 32rpx;
    font-weight: 600;
  }
}

/* ========== åè®®å¼¹çª— ========== */
.terms-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 40rpx;
}

.modal-content {
  width: 100%;
  max-height: 80vh;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border-radius: 24rpx;
  border: 2rpx solid rgba(255, 255, 255, 0.2);
  display: flex;
  flex-direction: column;
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 40rpx;
  border-bottom: 1rpx solid rgba(255, 255, 255, 0.1);
  
  .modal-title {
    color: #ffffff;
    font-size: 32rpx;
    font-weight: 600;
  }
  
  .modal-close {
    color: rgba(255, 255, 255, 0.6);
    font-size: 32rpx;
    padding: 10rpx;
  }
}

.modal-body {
  flex: 1;
  padding: 40rpx;
  max-height: 500rpx;
}

.terms-content {
  color: rgba(255, 255, 255, 0.8);
  font-size: 24rpx;
  line-height: 1.6;
  white-space: pre-line;
}

.modal-footer {
  padding: 30rpx 40rpx;
  border-top: 1rpx solid rgba(255, 255, 255, 0.1);
}

.modal-btn {
  height: 80rpx;
  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
  border-radius: 40rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  
  .btn-text {
    color: #333333;
    font-size: 28rpx;
    font-weight: 600;
  }
}
</style>